<div class="container mt-4">
  <h2 class="text-center text-success mb-4">Historial de Compras</h2>

  <div *ngIf="errorMessage" class="alert alert-danger text-center">
    {{ errorMessage }}
  </div>

  <div *ngIf="buys.length > 0 && !errorMessage" class="d-flex align-items-center mb-3">
    <label for="fecha" class="me-2 fw-bold">Seleccione una fecha:</label>
    <input
      type="date"
      id="fecha"
      class="form-control"
      style="width: 200px;"
      [(ngModel)]="selectedDate"
    />

    <button
      class="btn btn-success ms-3" (click)="generatePDF()" [disabled]="!selectedDate">Generar PDF
    </button>
  </div>

  <table
    *ngIf="buys.length > 0"
    class="table table-striped table-bordered text-center"
  >
    <thead class="table-success">
      <tr>
        <th>ID</th>
        <th>Fecha</th>
        <th>Producto</th>
        <th>Cantidad</th>
        <th>Precio Unitario</th>
        <th>Precio Total</th> 
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let buy of buys">
        <td>{{ buy.id }}</td>
        <td>{{ buy.date | date : "dd/MM/yyyy" }}</td>
        <td>{{ buy.nameProduct }}</td>
        <td>{{ buy.quantity }}</td>
        <td>{{ buy.unitPrice | currency }}</td>
        <td>{{ buy.totalPrice | currency }}</td>
      </tr>
    </tbody>
  </table>
</div>
